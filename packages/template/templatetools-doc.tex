\documentclass{ltxdoc}
\EnableCrossrefs
\CodelineIndex
\RecordChanges
%
\usepackage{cmap} 
\usepackage[T1]{fontenc} % T1 Schrift Encoding
\usepackage{lmodern}
%
\RequirePackage{enumitem}
\RequirePackage[table]{xcolor}

\input{preamble/listings-latex.tex}
%
\input{preamble/setup-hyperref.tex}

\newcommand{\package}[1]{\texttt{#1}}

\listfiles
\begin{document}

\changes{0.1}{2011/10/01}{Initial version.}

\DoNotIndex{\newcommand,\newenvironment}

\providecommand*{\url}{\texttt}
\title{The \textsf{templatetools} package}
\author{Matthias Pospiech \\ \url{matthias.pospiech@gmx.de}}
\date{\fileversion~from \filedate}

\maketitle
\begin{abstract}\noindent
Collection of tools, which are helpful for the creation of a \LaTeX{} template if conditional paths for code execution are required. Most of them are already
available from other packages, so that this package only provides a wrapper
with a unique code style. 
\end{abstract}
\tableofcontents

\section{Commands}

\subsection{if command sequence defined}
The following commands are all wrappers to \cs{ifcsdef} with only mandatory options:
\begin{itemize}
\item\cs{IfDefined}\marg{command}\marg{defined}
\item\cs{IfUndefined}\marg{command}\marg{undefined}
\item\cs{IfElseDefined}\marg{command}\marg{defined}\marg{undefined}
\item\cs{IfElseUndefined}\marg{command}\marg{undefined}\marg{defined}
\end{itemize}

\begin{lstlisting}[style=demostyle]
% Requires: Command \upmu
\IfDefined{upmu}{\usepackage[upmu]{gensymb}}
\end{lstlisting}

\subsection{if package(s) loaded}

The following commands are available in the preamble and in the document
\begin{itemize}
\item\cs{IfPackageLoaded}\marg{package}\marg{is loaded}
\item\cs{IfPackageNotLoaded}\marg{package}\marg{is not loaded}
\item\cs{IfElsePackageLoaded}\marg{package}\marg{loaded}\marg{not loaded}
\item\cs{IfPackagesLoaded}\marg{package1, package2, ... }
   \marg{all packages are loaded}
\item\cs{IfPackagesNotLoaded}\marg{package1, package2, ... }
   \marg{all packages are not loaded}
\end{itemize}

\begin{lstlisting}[style=demostyle]
% Incompatible: gensymb, units
\IfPackagesNotLoaded{gensymb, units}
  \usepackage{siunitx}
}
\end{lstlisting}

The code for \cs{IfPackagesLoaded} and the negation is based on the solution of ?? of this question \url{tx}. All others are wrappers to the commands from the package \package{ltxcmds}.


\subsection{if draft}

The following commands are available in the preamble and in the document:
\begin{itemize}
\item\cs{IfDraft}\marg{in draft mode}
\item\cs{IfNotDraft}\marg{not in draft mode}
\item\cs{IfNotDraftElse}\marg{in draft mode}\marg{not in draft mode}
\end{itemize}

\begin{lstlisting}[style=demostyle]
% print text of every \index{entry} to the margin
\IfDraft{
  \usepackage{showidx}
}
\end{lstlisting}

\subsection{execute after package}

The command 
\begin{itemize}
\item\cs{ExecuteAfterPackage}\marg{after this package}\marg{execute this code}
\end{itemize}
is simply a wrapper to \cs{AfterPackage} from \package{scrlfile} (Koma Script).

\begin{lstlisting}[style=demostyle]
% -> load afer hyperref 
\ExecuteAfterPackage{hyperref}{\usepackage{ltxtable}}
\end{lstlisting}

\subsection{if column type defined}
\LaTeX{} provides no tool to check for the existence of a column type. This is provided by the following command:
\begin{itemize}
\item\cs{IfColumntypeDefined}\marg{columntype character}\marg{is defined}\marg{is undefined}
\end{itemize}

\subsection{template definitions}

The following commands can be use to define macros which can then be used later.  
\begin{itemize}
\item\cs{SetTemplateDefinition}\marg{Group}\marg{Property}\marg{Code}
\item\cs{UseDefinition}\marg{Group}\marg{Property} 
\end{itemize}
%
In the following example this allows to switch the colors anywhere in the document:

\begin{lstlisting}[style=demostyle]
\SetTemplateDefinition{Target}{Web}{%
  \definecolor{pdfurlcolor}{rgb}{0,0,0.6}
}%
\SetTemplateDefinition{Target}{Print}{%
  \definecolor{pdfurlcolor}{rgb}{0,0,0}
}%
% Apply colors for web
\UseDefinition{Target}{Web}
\end{lstlisting}
\end{document}
