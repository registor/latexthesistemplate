\documentclass{ltxdoc}
\EnableCrossrefs
\CodelineIndex
\RecordChanges
%
\usepackage{cmap} 
\usepackage[T1]{fontenc} % T1 Schrift Encoding
\usepackage{lmodern}

\RequirePackage{templatesection}%
\RequirePackage{listings}
\RequirePackage[table]{xcolor}
\RequirePackage{enumitem}

\input{preamble/listings-latex.tex}
%
\input{preamble/setup-hyperref.tex}
%%% Set document layout / variables
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5\baselineskip}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
%%% doc commands
\input{preamble/setup-doc-commands.tex}

\listfiles
\begin{document}

\changes{0.1}{2011/01/20}{Initial version.}

\DoNotIndex{\newcommand,\newenvironment}

\providecommand*{\url}{\texttt}
\title{The \textsf{templatesection} package}
\author{Matthias Pospiech \\ \url{matthias.pospiech@gmx.de}}
\date{0.1~from \filedate}


\maketitle
\section{Introduction}
This packages provides an environment to switch a section of code
on or off. The code can be placed anywhere in the file and is 
not limited to the document or the preamble. 
The motivation for this package was to have commands which allow to preselect
sections of code in a preamble of a template, which are executed or not.

\section{Origin of the code}
The code is based on the \texttt{verbatim.sty} package and was 
originally modified by Ulrich Diez to match the pure comment
functionality. Further modifications are contributed by 
Matthias Pospiech. 
During the development some discussion about the best approach took place
on de.comp.text.tex (\url{http://groups.google.com/group/de.comp.text.tex/browse_thread/thread/2c18f0c221ab167f/}), which resulted in the current code. 
 
\section{Usage}
The idea of the following commands is to define a collection of code, here notated as a \emph{section}, which can be executed as it would be without the commands or which is not executed at all. To use that section it must be defined with \emph{true} (execute code) or \emph{false} (skip code).

\DescribeMacro{\DefineTemplateSection} \oarg{true/false}\marg{name} 
Defines a code section with a \emph{name}. The default is \emph{true}, thus the code will be executed.

\DescribeMacro{\SetTemplateSection} \marg{name}\marg{true/false} is like \cs{DefineTemplateSection}, but with both arguments mandatory.

\DescribeMacro{\BeginTemplateSection} \marg{name} starts the code section with the given name and

\DescribeMacro{\EndTemplateSection} \marg{name} ends the code section with the given name. Note that both commands need to be paired and not to be nested with other code sections.

\cs{BeginTemplateSection} and \cs{EndTemplateSection} mimic an environment. It would be preferable to define them as an environment, but that opens a group in \TeX{}, which has many disadvantages. For example this would make it impossible to load packages. Therefore this package defines paired commands and consequently, has no such limitations.

%
\section{Example}
In the following code the first section is going to be executed and the second and the third are completely skipped.
\begin{lstlisting}[style=demostyle]
\DefineTemplateSection[true]{ExecuteMe}
\DefineTemplateSection[false]{SkipMe}
%
\BeginTemplateSection{ExecuteMe}
  This sentence has ...
\EndTemplateSection{ExecuteMe}
%
\BeginTemplateSection{SkipMe}
  no end.
\EndTemplateSection{SkipMe}
%
\SetTemplateSection{ExecuteMe}{false}
%
\BeginTemplateSection{ExecuteMe}
  a different ending.
\EndTemplateSection{ExecuteMe}
\end{lstlisting}

\DefineTemplateSection[true]{ExecuteMe}
\DefineTemplateSection[false]{SkipMe}
\BeginTemplateSection{ExecuteMe}
  This sentence has ...
\EndTemplateSection{ExecuteMe}
%
\BeginTemplateSection{SkipMe}
  no end.
\EndTemplateSection{SkipMe}
%
\SetTemplateSection{ExecuteMe}{false}
%
\BeginTemplateSection{ExecuteMe}
  a different ending.
\EndTemplateSection{ExecuteMe}

\end{document}
